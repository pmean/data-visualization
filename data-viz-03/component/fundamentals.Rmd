---
title: "Line graphs, Fundamentals"
author: "Steve Simon"
date: "Created: 2019-08-19"
output: powerpoint_presentation
---

```{r child="../../common-files/src/component-header.Rmd"}
```

```{r}
load("../../common-files/data/cpi.RData")
load("../../common-files/data/houses.RData")
```

### Fundamentals, how to produce a line graph
+The key step in Python
```
mark_line()
```
+ The key step in R
```
geom_line()
```
+ The key step in Tableau
  + Choose Line from the Marks pulldown list
  
<div class="notes">

The basic steps to producing a line graph are fairly easy in each of the systems. In Tableau, you use the mark_line function. In R, you use the geom_line function. In Tableau, if you are lucky, the default graph choice will be a line graph. If not, select Line from the Marks list.

</div>

### Fundamentals, Aesthetics for lines
+ Location
+ Size
+ Shape (not what you think it is!)
+ Color

<div class="notes">

A line could mean a straight line or a curved line, a single line segment, a connected series of line segments or a polygon. It's a pretty complex thing, but generally a line represents a two dimensional relationship.

You can vary the size, shape, and color of a line. Shape is not what you think it is.

</div>

### Fundamentals, Show different types and locations of lines

((Show a curved line, a straight line, a line segment, a series of line segments, and a polygon. Show the code to create these.))

### Fundamentals, Size

```{r line-size}
initiate_image()
ggplot(cpi, aes(x=t, y=CPI)) +
  geom_line(size=8)
finalize_image()
```

`r display_image`

<div class="notes">

Lines can change size, but some systems refer to this as line width rather than size.

</div>

### Fundamentals, Shape

```{r line-shape}
initiate_image()
ggplot(cpi, aes(x=t, y=CPI)) +
  geom_line(linetype="dotted")
finalize_image()
```

`r display_image`

<div class="notes">

The shape of a line is not whether it is curved or straight. The shape of a line is whether it is represented using solid, dashed, or dotted lines. Most visualizations call this a line type rather than a line shape.

</div>

```{r child="../component/change-defaults.Rmd"}
```

### Fundamentals, Lines as summary statistics

```{r old-friend}
initiate_image()
ggplot(saratoga_houses, aes(x=Bedrooms, y=Price)) +
  geom_point()
finalize_image()
```

`r display_image`

<div class="notes">

If you have a lot of data, a line can sometimes emphasize patterns or trends that you might miss with just a scatterplot.

</div>

### Fundamentals, Lines as averages

```{r average-with-data}
initiate_image()
ggplot(saratoga_houses, aes(Bedrooms, Price)) +
  geom_point() +
  stat_summary(aes(y=Price, group=1), fun.y=mean, geom="line")
finalize_image()
```

`r display_image`

### Fundamentals, Lines as averages

```{r average-without-data}
initiate_image()
ggplot(saratoga_houses, aes(Bedrooms, Price)) +
  stat_summary(aes(y=Price, group=1), fun.y=mean, geom="line")
finalize_image()
```

`r display_image`

<div class="notes">

This image replaces a bunch of data points with an average computed at each X-value.

</div>

### Python

```{python}
import pandas as pd
import altair as alt
df = pd.read_csv("../../common-files/data/houses.csv")
pts = alt.Chart(df).mark_point().encode(
    x='Bedrooms',
    y='Price'
)
avg = alt.Chart(df).mark_line().encode(
    x='Bedrooms',
    y='mean(Price)'
)
ch = pts + avg
ch.save("../images/python/average-summary.html")
```

![Python graph with average summary line](../images/python/average-summary.png)

### Fundamentals, Lines as counts

```{r count}
initiate_image()
saratoga_houses %>%
  group_by(Bedrooms) %>%
  summarize(n=n()) %>%
  ggplot(aes(x=Bedrooms, y=n)) +
    geom_line() + geom_point(size=5)
finalize_image()
```

`r display_image`

<div class="notes">

This impage replaces a bunch of data points with the count at each x-value.

</div>

```{r child="../component/connect-averages.Rmd"}
```

### Fundamentals, Error bars

### Fundamentals, high-low bars

### Fundamentals, Boxplots

((Draw example and ask students to do a similar example))

### Fundamentals, Trend lines (linear)

```{r linear-trend-age}
initiate_image()
ggplot(saratoga_houses, aes(Age, Price)) +
  geom_point() +
  geom_smooth(method="lm")
finalize_image()
```

`r display_image`

<div class="notes">



</div>

### Fundamentals, Trend lines (spline)

```{r smooth-trend}
initiate_image()
ggplot(saratoga_houses, aes(Age, Price)) +
  geom_point() +
  geom_smooth(method="loess")
finalize_image()
```

`r display_image`

<div class="notes">



</div>

### Trend lines (spline), not so smooth

```{r smooth-trend-3}
initiate_image()
ggplot(saratoga_houses, aes(Age, Price)) +
  geom_point() +
  geom_smooth(method="loess", span=0.3)
finalize_image()
```

`r display_image`

<div class="notes">



</div>

```{r child="../component/insert-trend.Rmd"}
```

### Trend lines (logistic)

((Need a different data set here. Titanic???))

### Helpful tips

((Add three or four slides here. Maybe talk about opacity.))

### Families of lines

