---
title: "Recommendations for line graphs"
author: "Steve Simon"
date: "Created: 2019-08-19"
output: powerpoint_presentation
---

```{r child="../../common-files/src/component-header.Rmd"}
```

### Recommendation, Avoid dashed lines for high frequency data

```{r thick-versus-thin}
load("../../common-files/data/cpi.RData")
initiate_image()
ggplot(cpi, aes(t, CPI)) +
  geom_line(size=3, linetype="33", color="black") +
  geom_line(size=1, linetype="solid", color="red")
finalize_image()
```

`r display_image`

<div class="notes">

High frequency events are sudden surges and dips in a line over a narrow range. If your data has high frequency events (think stock market prices), then avoid thick lines or long dashes. These can hide some of the high frequency events.

</div>

### Recommendations, Avoid error bars (1/3)

```{r average-with-standard-deviation}
load("../../common-files/data/houses.RData")
saratoga_houses %>%
  group_by(Bedrooms) %>%
  summarize(avg_price=mean(Price), sd_price=sd(Price), n=n()) -> aggregated_prices
initiate_image()
ggplot(aggregated_prices, aes(Bedrooms, avg_price)) +
  geom_line() +
  geom_errorbar(aes(ymin=avg_price-sd_price, ymax=avg_price+sd_price), width=0.1)
finalize_image("Average price shown with error bar equal to one standard deviaiton")
```

`r display_image`

<div class="notes">

This graph shows error bars for the average price of a house given a fixed number of bedrooms. There is indeed an upward trend in prices. The more bedrooms you have, the higher the average price. But these error bars, equal to plus or minus one standard deviation, emphasize that there is a lot of overlap in individual prices.

</div>

### Recommendations, Avoid error bars (2/3)

```{r average-with-standard-error}
load("../../common-files/data/houses.RData")
saratoga_houses %>%
  group_by(Bedrooms) %>%
  summarize(avg_price=mean(Price), sd_price=sd(Price), n=n()) -> aggregated_prices
initiate_image()
ggplot(aggregated_prices, aes(Bedrooms, avg_price)) +
  geom_line() +
  geom_errorbar(aes(ymin=avg_price-sd_price/sqrt(n), ymax=avg_price+sd_price/sqrt(n)), width=0.1)
finalize_image("Average price shown with error bar equal to one standard error")
```

`r display_image`

<div class="notes">

Here is the same graph, but with the error bar representing plus or minus one standard error. The standard error is the standard deviation divided by the square root of the sample size. It shows how variable the mean is rather than how variable an individual observation is. This picture is quite different, and implies a much stronger trend. Which graph is better? Well, neither in my opinion.

</div>

### Recommendations, Avoid error bars (3/3)
+ No agreed upon definition for error bars
  + One standard deviation?
  + One standard error?
  + Confidence interval?
  + Range?
+ Error bars may hide asymmetric distributions
+ What does an overlap, non-overlap mean?

<div class="notes">

The first problem with error bars is that they do not have a commonly agreed upon definition. Is it plus or minus one standard deviation or plus or minus one standard error?

</div>

### Recommendations, Alternatives to error bars (1/2)
+ Original data
+ Error bars
+ Confidence bands
+ Boxplots

### Remaining work

+ Recommendations, when to start at zero
+ Recommendations, differentiating lines
+ Recommendations, lines imply continuity, bars don't
+ Recommendations, aspect ratio
+ Recommendations, square graphs
+ Recommendations, sort your data or hope that your software does