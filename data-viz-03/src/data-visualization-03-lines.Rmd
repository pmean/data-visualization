---
title: "Data visualization - 03 - lines"
author: "Steve Simon"
date: "6/23/2019"
output: powerpoint_presentation
---

```{r setup, echo=FALSE}
knitr::opts_chunk$set(echo = FALSE)
suppressMessages(suppressWarnings(library(dplyr)))
suppressMessages(suppressWarnings(library(ggplot2)))
suppressMessages(suppressWarnings(library(magrittr)))
suppressMessages(suppressWarnings(library(readr)))
fn <- "https://dasl.datadescription.com/download/data/3138"
cpi <- read_tsv(fn, col_types=cols())
cpi$t <- 2007 + (1:132)/12
cpi <- cpi[1:128, ]
ggplot(cpi, aes(x=t, y=CPI)) +
  geom_line()
```

### Notes about this talk
+ This slide should not to be included in the final presentation
+ 01-points MUST come before
+ 02-bars could come before or after

### To prepare for this section

((Download the Titanic data set))

### Python code

### R code

### Tableau steps

### Group exercise (1 of 2)

![Line graph of strikeouts and hits over time](../images/03/baseball-line-graph.png)

<div class="notes">

This is one of two graphs. It was published in

Popvich, N., Fountain, H., & Pearce, A. (2017, September 22). We Charted Arctic Sea Ice for Nearly Every Day Since 1979. Youâ€™ll See a Trend. - The New York Times. The New York Times. Retrieved from https://www.nytimes.com/interactive/2017/09/22/climate/arctic-sea-ice-shrinking-trend-watch.html

Split into pairs. Review the article briefly (about 5 minutes) and look at the graph. Explain to your partner what the graph is trying to show. Your partner will get a different graph and do the same thing with you listening this time.

</div>

### Group exercise (2 of 2)

((Find second news article and image))

### More theory -- The gestalt of graphics

+ How do you draw someone's eye to quickly make certain associations?
+ These ideas drawn from the Bergen and Iverson workshop.

### A block of points - no emphasis

```{r block-no-emphasis}
df <- data.frame(
  x=rep(1:5, 4),
  y=rep(1:4, each=5)
)
ggplot(df, aes(x=x, y=y)) +
  scale_x_continuous(name=NULL, breaks=NULL) +
  scale_y_continuous(name=NULL, breaks=NULL) -> g
g + geom_point(size=5)
```

### Color emphasizes rows

```{r block-color}
f <- rep(c("red", "green", "red", "green"), each=5)
g + geom_point(color=f, size=5)
```

### Shape emphasizes columns

```{r block-shape}
f <- rep(c("triangle", "square", "triangle", "square", "triangle"), 4)
g + geom_point(shape=f, size=5)
```

### Double up for stronger emphasis

```{r block-double-up}
f1 <- rep(c("red", "green", "red", "green"), each=5)
f2 <- rep(c("triangle", "square", "triangle", "square"), each=5)
g + geom_point(color=f1, shape=f2, size=5)
```

### Connectedness emphasizes rows

```{r block-connectedness}
g + geom_point(size=5) +
  geom_segment(x=1, y=1, xend=5, yend=1) + 
  geom_segment(x=1, y=2, xend=5, yend=2) + 
  geom_segment(x=1, y=3, xend=5, yend=3) + 
  geom_segment(x=1, y=4, xend=5, yend=4) 
```

### Proximity emphasize columns

```{r block-proximity}
g + geom_point(size=5) +
  expand_limits(y=c(-3, 8))
```

### Enclosure for emphasis, eight special points

```{r block-enclosure}
g + geom_point(size=5) +
  expand_limits(y=c(0.8, 4.2)) +
  expand_limits(x=c(0.8, 5.2)) +
  geom_segment(x=3.8, y=0.8, xend=5.2, yend=0.8) +
  geom_segment(x=3.8, y=4.2, xend=5.2, yend=4.2) +
  geom_segment(x=3.8, y=0.8, xend=3.8, yend=4.2) +
  geom_segment(x=5.2, y=0.8, xend=5.2, yend=4.2)
```

### Continuity

((Show example of sloping text))

### Changing your emphasis

((Recreate example from slides 47-50 of Bergen and Iverson))

### Aesthetics for lines
+ Location
+ Size
+ Shape (not what you think it is!)
+ Color

<div class="notes">

A line could mean a straight line or a curved line, a single line segment, a connected series of line segments or a polygon. It's a pretty complex thing, but generally a line represents a two dimensional relationship.

You can vary the size, shape, and color of a line. Shape is not what you think it is.

</div>

### Show different types and locations of lines

((Show a curved line, a straight line, a line segment, a series of line segments, and a polygon.))

### Size

```{r line-size}
ggplot(cpi, aes(x=t, y=CPI)) +
  geom_line(size=8)
```

### Shape

```{r line-shape}
ggplot(cpi, aes(x=t, y=CPI)) +
  geom_line(linetype="dotted")
```

### On your own
+ change the line to a dashed line.
+ Make the width equal to 3
+ Make the color green

### Wait before showing

((Python code))

```{}
# R code
ggplot(cpi, aes(x=t, y=CPI)) +
  geom_line(size=3, linetype="dashed", color="green")
```

((Tableau steps))

### What your visualization might look like

```{r width-shape-color}
ggplot(cpi, aes(x=t, y=CPI)) +
  geom_line(size=3, linetype="dashed", color="green")
```
### Lines as summary statistics

```{r old-friend}
fn <- "https://dasl.datadescription.com/download/data/3275"
saratoga_houses <- read.table(fn, header=TRUE, sep="\x09")
ggplot(saratoga_houses, aes(x=Bedrooms, y=Price)) +
  geom_point()
```
### Lines as averages

```{r average}
saratoga_houses %>%
  group_by(Bedrooms) %>%
  summarize(avg_price=mean(Price)) %>%
  ggplot(aes(x=Bedrooms, y=avg_price)) +
    geom_line() + geom_point(size=5)
```

### Lines as counts

```{r count}
saratoga_houses %>%
  group_by(Bedrooms) %>%
  summarize(n=n()) %>%
  ggplot(aes(x=Bedrooms, y=n)) +
    geom_line() + geom_point(size=5)
```

### On your own
+ Draw a line graph showing the relationship between the number of bathrooms and price.

### Wait before showing

((Add code here))

### What your visualization might look like

((Add visualization here))

### Boxplots

((Draw example and ask students to do a similar example))

### Trend lines (linear)

```{r linear-trend-age}
ggplot(saratoga_houses, aes(Age, Price)) +
  geom_point() +
  geom_smooth(method="lm")
```


### Trend lines (spline)

```{r smooth-trend}
ggplot(saratoga_houses, aes(Age, Price)) +
  geom_point() +
  geom_smooth(method="loess")
```

### Trend lines (spline), not so smooth

```{r smooth-trend-3}
ggplot(saratoga_houses, aes(Age, Price)) +
  geom_point() +
  geom_smooth(method="loess", span=0.3)
```

### On your own
+ Fit a linear trend line looking at Living.Area versus Price.
+ Fit a smooth curve

### Wait before showing

### What your visualization might look like

```{r living-area-lm}
ggplot(saratoga_houses, aes(x=Living.Area, y=Price)) +
  geom_point() +
  geom_smooth(method="lm")
```

### What your visualization might look like

```{r living-area-loess}
ggplot(saratoga_houses, aes(x=Living.Area, y=Price)) +
  geom_point() +
  geom_smooth(method="loess")
```


### Trend lines (logistic)

((Need a different data set here. Titanic???))

### Helpful tips

((Add three or four slides here. Maybe talk about opacity.))

### Group exercise

+ Review the following visualization in your group.
  + Summarize what aesthetics (location, size, shape, color) appear in the graph
  + What variables map to each aesthetic?

((Find new images or use the ones from earlier))

### Summary (1 of 2)
+ Gestalt principles
  + ((List here))
+ Aesthetics for lines
  + Size, Shape, Color
+ Lines as summary statistics
  + One number summary (mean, total, count, percent)
  + Two number summary (error bars)
  + Five number summary (boxplots)
  
### Summary (2 of 2)
+ Trend lines (linear, logistic, spline)
+ Helpful tips
  + ((List here))