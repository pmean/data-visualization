---
title: "Barchart fundamentals"
author: "Steve Simon"
date: "2019-08-03"
output: powerpoint_presentation
---

```{r setup-v02-main, echo=FALSE, message=FALSE}
knitr::opts_chunk$set(echo = FALSE)
source("../../common-files/setup.R")
titanic <- read_tsv("../data/titanic.txt")
```

### Barchart fundamentals, Bars
+ Fewer in numbers than points
+ Usually a summary statistic
  + Count
  + Percent
  + Average
  + Total
+ A bar chart is NOT a histogram
  
<div class="notes">

Bar charts are different than point charts. There are usually only a few bars. These bars usually represent a summary statistic, like a count, percent, average, or total.

There is a technical distinction between a bar chart and a histogram. Histograms are a great diagnostic tool, but usually ends up on the cutting room floor. So I won't be talking about it much, if at all, in this workshop.

</div>

### Barchart fundamentals, Aesthetics for bars
+ Review
  + Location
  + Size
  + Color
  + NOT shape!!!
  
<div class="notes">

Recall that aesthetics are visual attributes associated with a geometry/mark. You can map variables to the location, size, and/or color of bars, but you cannot assign a variable to the shape of a bar.

</div>

### Barchart fundamentals, Location

```{r location-horizontal}
fn <- initiate_image()
ggplot(titanic, aes(Pclass)) +
  geom_bar()
finalize_image()
```

![Horizontal bar chart](../images/`r fn`.png)

<div class="notes">

This is data from the Titanic, a ship that was as massive as its name. It was considered unsinkable, but on its maiden voyage in 1912, the ship hit an iceberg and sank. It sank during an era where people really believed in women and children first, and this shows quite clearly in the mortality statistics. There was a difference, though, between third class passengers like Leonardo diCaprio and first class passengers like Kate Winslet.

This shows a simple bar chart. The x-axis is passenger class and the y-axis is count. Note that there are about the same number of first and second class passengers, but the two combined does not come close to the number of third class passengers.

</div>

```{r child="barcharts-fundamentals-draw-gender.Rmd"}
```

### Barchart fundamentals, Size

+ Length varies, width doesn't
  + Exception, mosaic plots
  + Think about gaps between bars
  
### Barchart fundamentals, Color

```{r bar-color}
fn <- initiate_image()
ggplot(titanic, aes(x=Pclass, fill=Pclass)) +
  geom_bar() +
  scale_fill_manual(values=c("darkgrey", "darkgrey", "red", "darkgrey"))
finalize_image()

```

### Barchart fundamentals, Color
+ Use for emphasis in simple bar charts
+ Very important for stacked or side-by-side bar charts

<div class="notes">

For simple bar charts like all the ones we've seen so far, color is not really needed. You already can distinguish between the passenger classes using the location. If you do use color in a simple bar chart, it is often to emphasize a point. In the previous bar chart, I used red for third class, because Kate Winslet, a rich first class passenger, found true love in third class, with the adorable Leonardo di Caprio.

Color becomes very important in just a minute when we add another layer of complexity.

</div>

```{r child="barcharts-fundamentals-first-class-red.Rmd"}
```

### Barchart fundamentals, Stack versus dodge
+ Summarize by two categories
+ Facet
  + Separate plots
+ Dodge
  + Side by side
+ Stack
  + One on top, one on bottom

<div class="notes">

Bar charts that represent a summary across a single categorical variable are fairly simple and easy to handle. But when you want to summarize by two categories simultaneously, things get interesting. Interesting in a good way.

</div>

### Barchart fundamentals, Titanic passenger count by gender

```{r count-by-gender}
fn <- initiate_image()
ggplot(titanic, aes(x=Sex)) +
  geom_bar()
finalize_image()
```


![Bar chart](../images/`r fn`.png)

<div class="notes">



</div>

### Barchart fundamentals, Titanic passenger count by passenger class

```{r count-by-passenger-class}
fn <- initiate_image()
ggplot(titanic, aes(x=Pclass)) +
  geom_bar()
finalize_image()
```


![Bar chart](../images/`r fn`.png)

<div class="notes">



</div>

### Barchart fundamentals, Titanic facet

```{r count-by-facet}
fn <- initiate_image()
titanic %>%
  ggplot(aes(x=Pclass, fill=Sex)) +
    geom_bar() + 
    facet_grid(cols=vars(Sex))
finalize_image()
```

![Bar chart](../images/`r fn`.png)

<div class="notes">



</div>

### Barchart fundamentals, Titanic dodge

```{r count-by-dodge}
fn <- initiate_image()
titanic %>%
  ggplot(aes(x=Pclass, fill=Sex)) +
    geom_bar(position="dodge")
finalize_image()
```

![Bar chart](../images/`r fn`.png)

<div class="notes">



</div>

### Barchart fundamentals, Titanic stack

```{r count-by-stack}
fn <- initiate_image()
titanic %>%
  ggplot(aes(x=Pclass, fill=Sex)) +
    geom_bar(position="stack")
finalize_image()
```

![Bar chart](../images/`r fn`.png)

<div class="notes">



</div>


```{r child="barcharts-fundamentals-mortality-by-sex.Rmd"}
```


### Barchart fundamentals, Group exercise
+ Review the following visualization in your group
  + Summarize what aesthetics appear in the graph
  + What variables map to each aesthetic?
  
((Provide visualization. Maybe use the visualization from the earlier exercise?))

### Barchart fundamentals, Summarizations
+ One number summary (mean or percentage)
+ Two number summary (error bars)
+ Five number summary (boxplots)
+ All the data
  + Jittering
  + Opacity
  
<div class="notes">

((note to myself: maybe this goes better in the talk about lines.))

</div>
  
### Barchart fundamentals, Switching from count to percent

((Show the code in Python, R, and Tableau. Explain why you might want counts versus percents.))

### Barchart fundamentals, Example with means

((Need to find the right data set to illustrate this. Maybe the Saratoga house prices?))

### Barchart fundamentals, Example with totals

((Same data. What means tell you versus totals.))

### Barchart fundamentals, Boxplots example

((Include an explanation of what a boxplot is))

### Barchart fundamentals, Jittering example

((Include an explanation on when it doesn't work.))

### Barchart fundamentals, Opacity example

((Note the computational expense.))

### Barchart fundamentals, On your own

((Find a totally different data set and get the students to draw four different visualizations. Have them divide into groups that like the same visualization software and have each person do a different visualization.))

### Barchart fundamentals, Summary
+ "A mapping of data to the visual aesthetics of geometries/marks" 
  + Bars are a type of geometry/mark
  + Aesthetics for bars include location, size, color
  + Stack versus dodge
+ Basic tips
  + Place comparators close
  + Use axis ticks, light grid lines

### Barchart fundamentals, On your own

((Find a totally different data set and get the students to draw four different visualizations. Have them divide into groups that like the same visualization software and have each person do a different visualization.))

```{r save-everything}
save.image("../data/barcharts-fundamentals.RData")
```